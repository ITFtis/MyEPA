@{
    Layout = "~/Views/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12 col-md-6">
            @using (Html.BeginForm("Report", "EPBxWater"))
            {
                <h4>@ViewBag.City<span>水質抽驗結果通報</span></h4>
                <span>通報日期：</span> @Html.TextBox("ReportDay", (string)ViewBag.ReportDay, new { @readonly = "readonly", @style = "border:none" })
                <br />
                <span>災害編號：</span> @Html.TextBox("DiasterId", (string)ViewBag.DiasterId, new { @readonly = "readonly", @style = "border:none" })
                <br />
                <span>災害名稱：</span> @Html.TextBox("DiasterName", (string)ViewBag.DiasterName, new { @readonly = "readonly", @style = "border:none" })
                <br />
                <span>抽驗地點：</span>
                @ViewBag.City @Html.DropDownList("Town", new List<SelectListItem>
{
new SelectListItem{Text = "請選擇",Value = "未填",Selected=true}
})
                <br />
                <span>地址</span>
                @Html.TextBox("Address", "", new { @style = "border:none;background-color:WhiteSmoke;width:80%" })
                <br />
                <span>抽驗座標：</span>
                <span>X:</span>@Html.TextBox("Xpos", (string)ViewBag.Xpos, new { @style = "width:30%;border:none;background-color:WhiteSmoke" })
                <span>Y:</span>@Html.TextBox("Ypos", (string)ViewBag.Ypos, new { @style = "width:30%;border:none;background-color:WhiteSmoke" })
                <br />
                <span>水樣別：</span>
                @Html.DropDownList("WaterType", new List<SelectListItem>
         {
         new SelectListItem{Text = "直接供水",Value = "直接供水", Selected=true},
         new SelectListItem{Text = "間接供水", Value = "間接供水"},
         new SelectListItem{Text = "非自來水",Value = "非自來水"},
         new SelectListItem{Text = "簡易自來水",Value = "簡易自來水"}
         })
                <br />

                <span>原水濁度(NTU)：</span>
                @Html.TextBox("Turbity", "", new { @style = "width:50%;border:none;background-color:WhiteSmoke" })
                <br />


            }
        </div>
        <br />
        <div id="MapArea" class="col-12 col-md-6">

        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <br />
            <table border="1" style="width:100%">
                <tr>
                    <th>檢驗項目</th>
                    <th>標準值</th>
                    <th>檢驗值</th>
                    <th>檢驗方法</th>
                </tr>
                <tr>
                    <td>自由有效餘氯</td>
                    <td>
                        @Html.DropDownList("A", new List<SelectListItem>
    {
    new SelectListItem{Text = "0.2-1.0",Value = "0.2-1.0", Selected=true},
    })
                        毫克/公升
                    </td>
                    <td>
                        @Html.TextBox("B")
                    </td>
                    <td>
                        NIEA_W408.51A
                    </td>
                </tr>
                <tr>
                    <td>大腸桿菌群</td>
                    <td>
                        @Html.DropDownList("C", new List<SelectListItem>
    {
    new SelectListItem{Text = "6mpn/100毫升",Value = "6mpn/100毫升", Selected=true},
    })

                    </td>
                    <td>
                        @Html.DropDownList("D", new List<SelectListItem>
 {
 new SelectListItem{Text = "檢驗中",Value = "檢驗中", Selected=true},
 new SelectListItem{Text = "未檢出", Value = "未檢出"},
 new SelectListItem{Text = "<1",Value = "<1"},
 new SelectListItem{Text = "TNTC",Value = "TNTC"},
  new SelectListItem{Text = "其它數值",Value = "其它數值"},
  new SelectListItem{Text = "不檢驗",Value = "不檢驗"}
 })
                    </td>
                    <td>
                        @Html.DropDownList("E", new List<SelectListItem>
{
new SelectListItem{Text = "NIEA_E230.54B",Value = "NIEA_E230.54B", Selected=true},
new SelectListItem{Text = "NIEA_E201.53B", Value = "NIEA_E201.53B"},
new SelectListItem{Text = "NIEA_E202.52B",Value = "NIEA_E202.52B"},
new SelectListItem{Text = "NIEA_E215.50C",Value = "NIEA_E215.50C"},
new SelectListItem{Text = "NIEA_E230.52B",Value = "NIEA_E230.52B"},
new SelectListItem{Text = "NIEA_E231.52B",Value = "NIEA_E231.52B"}
})
                    </td>
                </tr>
                <tr>
                    <td>氫離子濃度指數</td>
                    <td>
                        6.0-8.5
                    </td>
                    <td> @Html.TextBox("F")</td>
                    <td>
                        NIEA_W424.52A
                    </td>
                </tr>
                <tr>
                    <td>濁度</td>
                    <td>
                        @Html.DropDownList("G", new List<SelectListItem>
{
new SelectListItem{Text = "2",Value = "2", Selected=true}
}) NTU
                    </td>
                    <td> @Html.TextBox("H")</td>
                    <td>
                        NIEA_W219.52C
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>其它</span> @Html.TextBox("I")
                        <br />
                        非自來水請於此增加氨氮檢測
                    </td>
                    <td></td>
                    <td> @Html.TextBox("J")</td>
                    <td>
                        @Html.TextBox("K")
                    </td>
                </tr>
                <tr>
                    <td>
                        其它 @Html.TextBox("L")

                    </td>
                    <td></td>
                    <td> @Html.TextBox("M")</td>
                    <td>
                        @Html.TextBox("N")
                    </td>
                </tr>
                <tr>
                    <td>
                        其它 @Html.TextBox("O")

                    </td>
                    <td></td>
                    <td> @Html.TextBox("P")</td>
                    <td>
                        @Html.TextBox("Q")
                    </td>
                </tr>
            </table>
            <br/>
            <div class="text-center">
                <input type="submit" class="btn btn-danger text-center" value="確認儲存" />
            </div>
        </div>
    </div>
</div>

<script>
    function PickItemForEdit(DiasterId, DiasterName, DiasterType, StartTime, EndTime, Comment, DiasterState) {
        $("#DiasterId").val(DiasterId);
        $("#DiasterName").val(DiasterName);
    }
</script>

<script>
    function PutMarkOnMap(x, y) {
        var MapTarget = L.latLng(x, y);
        Map.setView(MapTarget, 14);
        if (MarkCollection != undefined) {
            Map.removeLayer(MarkCollection);
        };
        MarkCollection = L.marker([x, y]).addTo(Map);
        $("#Xpos").val(x);
        $("#Ypos").val(y);
    }

    var MapElement = document.getElementById('MapArea');
    MapElement.style = 'height:300px;';
    var Map = L.map(MapElement);
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(Map);
    var MapTarget = L.latLng('25.0400458', '121.55859');
    Map.setView(MapTarget, 14);

    function MapClick(e) {
        var Xvalue = e.latlng.lat.toString();
        var Yvalue = e.latlng.lng.toString();
        if (MarkCollection != undefined) {
            Map.removeLayer(MarkCollection);
        };
        MarkCollection = L.marker([Xvalue, Yvalue]).addTo(Map);
        $("#Xpos").val(Xvalue);
        $("#Ypos").val(Yvalue);
        $("#EditXpos").val(Xvalue);
        $("#EditYpos").val(Yvalue);
    }
    var MarkCollection = {};
    Map.on('click', MapClick);
</script>
@{Html.RenderPartial("~/Views/Components/JSforB1e23.cshtml");}


@model MyEPA.Models.RecResourceModel
@using MyEPA.Models

@{
    ViewBag.Title = "資源調度 - 新增";
    Layout = "~/Views/_Layout.cshtml";

    string diasterName = ViewBag.DiasterName;

    //querystring
    int type = ViewBag.Type;
    int diasterId = ViewBag.DiasterId;
    List<CityModel> Citys = ViewBag.Citys;
}

<h3>
    新增@(type == 1 ? "調度需求" : "提供資源")
</h3>

@section styles{
    <link rel="stylesheet" href="~/Content/flatpickr.css">
    <link rel="stylesheet" href="~/Content/confirmDate.css">
}

<div class="form-horizontal">
    <hr />

    <div class="form-group">
        <div class="col-md-6">
            災害名稱：@diasterName
        </div>
    </div>

    @*@Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.Id)*@
    @using (Html.BeginForm("Create", "RecResource", FormMethod.Post, new { @enctype = "multipart/form-data" }))
    {
        <div class="form-group">
            @Html.LabelFor(model => model.CityId, htmlAttributes: new { @class = "control-label col-md-1" })
            <div class="col-md-6">
                @*@Html.EditorFor(model => model.CityId, new { htmlAttributes = new { @class = "form-control" } })*@

                @Html.HiddenFor(model => model.DiasterId, new { @Value = diasterId })
                @Html.HiddenFor(model => model.Type, new { @Value = type })
                <select id="CityId" name="CityId">
                    @foreach (var item in Citys)
                    {
                        <option value="@item.Id">@item.City</option>
                    }
                </select>
                @*@Html.ValidationMessageFor(model => model.CityId, "", new { @class = "text-danger" })*@
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Reason, htmlAttributes: new { @class = "control-label col-md-1" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.Reason, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.ContactPerson, htmlAttributes: new { @class = "control-label col-md-1" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.ContactPerson, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.ContactMobilePhone, htmlAttributes: new { @class = "control-label col-md-1" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.ContactMobilePhone, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Items, htmlAttributes: new { @class = "control-label col-md-1" })
            <div class="col-md-6">                
                <select id="Items" name="Items">
                    @foreach (var item in Code.GetRecItems())
                    {
                        <option value="@item.Key">@item.Value</option>
                    }
                </select>
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Spec, htmlAttributes: new { @class = "control-label col-md-1" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.Spec, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Quantity, htmlAttributes: new { @class = "control-label col-md-1" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.Quantity, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Unit, htmlAttributes: new { @class = "control-label col-md-1" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.Unit, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            @{
                string lblUSDate = "";
                if (type == 1)
                { lblUSDate = "需用期間(起)"; }
                else if (type == 2)
                { lblUSDate = "提供期間(起)"; }
            }

            <label class="control-label col-md-1" for="">
                <span class="text-danger">*</span>
                @lblUSDate
            </label>            
            <div class="col-md-6">
                @Html.TextBox("USDate", "", new { @type = "Date", required = "required" })
            </div>
        </div>
        <div class="form-group">
            @{
                string lblUEDate = "";
                if (type == 1)
                { lblUEDate = "需用期間(迄)"; }
                else if (type == 2)
                { lblUEDate = "提供期間(迄)"; }
            }

            <label class="control-label col-md-1" for="">
                <span class="text-danger">*</span>
                @lblUEDate
            </label>            
            <div class="col-md-6">
                @Html.TextBox("UEDate", "", new { @type = "Date", required = "required" })
            </div>
        </div>
        <hr>
        <input type="submit" value="確認送出" class="btn align-center" />
        <a href="@Url.Action("Index")?type=@type&diasterId=@diasterId">
            <div class="btn align-center">取消</div>
        </a>
        <br>
    }
</div>

@section scripts{    
    <script src="~/Scripts/confirmDate.js"></script>
    <script src="~/Scripts/flatpickr.js"></script>
}

@model IEnumerable<MyEPA.ViewModels.ContactManualFileDataViewModel>
@using MyEPA.Enums;
@{
    Layout = "~/Views/_ContactManualLayout.cshtml";
    SourceTypeEnum sourceType = ViewBag.SourceType;
    ViewBag.Title = sourceType.GetDescription();
}

<h2>@ViewBag.Title</h2>
<td>
    @Html.ActionLink("新增檔案", "Upload", new { sourceType }, new { @class = "btn btn-success" })
</td>
<table class="table">
    <tr>
        <th></th>
        <th>
            檔案下載
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DepartmentName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UserFileName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CreateDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CreateUser)
        </th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.ActionLink("修改", "Upload",new { sourceId = item.SourceId, item.SourceType})
            </td>
            <td>
                @Html.ActionLink(item.UserFileName, "Download", "FileData", new { id = item.Id }, new { })
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DepartmentName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UserFileName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @item.CreateDate.ToString("yyyy/MM/dd HH:mm:ss")
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreateUser)
            </td>
        </tr>
    }

</table>